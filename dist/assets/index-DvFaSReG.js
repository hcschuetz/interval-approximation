(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var e=100,t=3,n=2*Math.PI,r=document.querySelector(`#out`),i=r.getContext(`2d`),{width:a,height:o}=r,s=15,c=0,l=e,u=5,d=-.5,f=.5,p=(a-2*s)/(l-c),m=s-p*c,h=e=>p*e+m,g=(o-2*u)/(f-d),_=u-g*d,v=e=>g*-e+_;function y(e,t,n,r){i.beginPath(),i.moveTo(h(e),v(t)),i.lineTo(h(n),v(r)),i.stroke()}function b(e,r){i.beginPath(),i.arc(h(e),v(r),t,0,n),i.fill()}var x=document.querySelector(`#numerator`),S=document.querySelector(`#numerator-out`);x.addEventListener(`input`,()=>S.value=x.value),x.value=S.value=`5`;var C=document.querySelector(`#denominator`),w=document.querySelector(`#denominator-out`);C.addEventListener(`input`,()=>w.value=C.value),C.value=w.value=`3`;var T=document.querySelector(`#strands`),E=document.querySelector(`#strands-out`);T.addEventListener(`input`,()=>E.value=T.value===`0`?`-`:T.value),T.dispatchEvent(new InputEvent(`input`));var D=document.querySelector(`#abs`),O=document.querySelector(`#abs-out`);D.addEventListener(`change`,()=>{O.value=D.checked?`unsigned`:`signed`}),D.checked=!1,D.dispatchEvent(new CustomEvent(`change`));var k=document.querySelector(`#in-steps`),A=document.querySelector(`#in-steps-out`);k.addEventListener(`change`,()=>{A.value=k.checked?`measure in steps`:`measure in cents`}),k.checked=!0,k.dispatchEvent(new CustomEvent(`change`));var j=60,M=document.querySelector(`label[for="max-cents"]`),N=document.querySelector(`#max-cents`),P=document.querySelector(`#max-cents-out`);N.addEventListener(`input`,()=>{let{value:e}=N;P.value=`-${e}ct â€“ +${e}ct`,j=Number.parseInt(e)}),N.value=j.toString(),N.dispatchEvent(new InputEvent(`input`)),k.addEventListener(`change`,()=>{let{checked:e}=k;N.disabled=e,M.style.opacity=P.style.opacity=e?`0.5`:`1`}),k.dispatchEvent(new CustomEvent(`change`));var F=document.querySelector(`#ratio`),I=document.querySelector(`#interval-in-octaves`),L=document.querySelector(`#interval-times-strands`);function R(){i.strokeStyle=`#888`,i.fillStyle=`#000`,i.lineWidth=.5,y(c,0,l,0),y(c,d,c,f),i.font=`10px sans`;for(let e=c+10;e<=l;e+=10)y(e,-.02,e,.02),i.fillText(e.toString(),h(e)-5,v(-.05));if(k.checked){y(c,d,l,d),y(c,f,l,f);for(let e of[d,0,f])i.fillText(e.toString(),h(0),v(e)+3)}else{i.fillText(`0ct`,h(0),v(0)+3);let e=j<20?5:j<50?10:j<100?20:j<200?50:100,t=.5/j;for(let n=e;n<=j;n+=e)i.fillText(`-${n.toFixed()}ct`,h(0),v(-n*t)+3),i.fillText(`+${n.toFixed()}ct`,h(0),v(+n*t)+3)}}function z(){let t=Number.parseInt(x.value)/Number.parseInt(C.value),n=Math.log2(t),r=Number.parseInt(T.value),a=Math.max(1,r),o=D.checked,s=k.checked;F.value=t.toString(),I.value=n.toString(),L.value=r?(n*a).toString():`-`,i.lineWidth=1;for(let t=0;t<a;t++){i.strokeStyle=i.fillStyle=r?`hsl(${t/a}turn 100% 50%)`:`#000`;let c=0,l=0;for(let i=t;i<=e;i+=a){if(i===0)continue;let e=n*i,t=e-Math.round(e);o&&(t=Math.abs(t)),s||(t=t*600/(i*j)),b(i,t),r&&(c>0&&y(c,l,i,t),[c,l]=[i,t])}}}for(let e of[x,C,T,D,k,N])e.addEventListener(`input`,()=>{i.clearRect(0,0,a,o),R(),z()});R(),z();