(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var e=100,t=3,n=2*Math.PI,r=document.querySelector(`#out`),i=r.getContext(`2d`),{width:a,height:o}=r,s=15,c=0,l=e,u=5,d=-.5,f=.5,p=(a-2*s)/(l-c),m=s-p*c,h=e=>p*e+m,g=(o-2*u)/(f-d),_=u-g*d,v=e=>g*-e+_;function y(e,t,n,r){i.beginPath(),i.moveTo(h(e),v(t)),i.lineTo(h(n),v(r)),i.stroke()}var b=[];function x(e,r,a,o){i.beginPath();let s=h(e),c=v(r);b.push({X:s,Y:c,onin:a,onout:o}),i.arc(s,c,t,0,n),i.fill()}var S=void 0;function C(e){let{left:t,top:n}=r.getBoundingClientRect(),{clientX:i,clientY:a}=e,o=i-t,s=a-n,c=b[0],l=Number.MAX_VALUE;for(let e of b){let t=(o-e.X)**2+(s-e.Y)**2;t<l&&(c=e,l=t)}l<5**2?c!==S&&(S?.onout(),S=c,c.onin(e)):(S?.onout(),S=void 0)}for(let e of[`pointerenter`,`pointermove`,`pointerdown`])r.addEventListener(e,C);var w=document.querySelector(`#numerator`),T=document.querySelector(`#numerator-out`);w.addEventListener(`input`,()=>T.value=w.value),w.value=T.value=`5`;var E=document.querySelector(`#denominator`),D=document.querySelector(`#denominator-out`);E.addEventListener(`input`,()=>D.value=E.value),E.value=D.value=`3`;var O=document.querySelector(`#strands`),k=document.querySelector(`#strands-out`);O.addEventListener(`input`,()=>k.value=O.value===`0`?`-`:O.value),O.value=`4`,O.dispatchEvent(new InputEvent(`input`));var A=document.querySelector(`#abs`),j=document.querySelector(`#abs-out`);A.addEventListener(`change`,()=>{j.value=A.checked?`unsigned`:`signed`}),A.checked=!1,A.dispatchEvent(new CustomEvent(`change`));var M=document.querySelector(`#in-steps`),N=document.querySelector(`#in-steps-out`);M.addEventListener(`change`,()=>{N.value=M.checked?`measure in steps`:`measure in cents`}),M.checked=!0,M.dispatchEvent(new CustomEvent(`change`));var P=60,F=document.querySelector(`label[for="max-cents"]`),I=document.querySelector(`#max-cents`),L=document.querySelector(`#max-cents-out`);I.addEventListener(`input`,()=>{let{value:e}=I;L.value=`-${e}ct ... +${e}ct`,P=Number.parseInt(e)}),I.value=P.toString(),I.dispatchEvent(new InputEvent(`input`)),M.addEventListener(`change`,()=>{let{checked:e}=M;I.disabled=e,F.style.opacity=L.style.opacity=e?`0.5`:`1`}),M.dispatchEvent(new CustomEvent(`change`));var R=document.querySelector(`#ratio`),z=document.querySelector(`#interval-in-octaves`),B=document.querySelector(`#interval-times-strands`);function V(){i.strokeStyle=`#888`,i.fillStyle=`#000`,i.lineWidth=.5,y(c,0,l,0),y(c,d,c,f),i.font=`10px sans`;for(let e=c+10;e<=l;e+=10)y(e,-.02,e,.02),i.fillText(e.toString(),h(e)-5,v(-.05));if(M.checked){y(c,d,l,d),y(c,f,l,f);for(let e of[d,0,f])i.fillText(e.toString(),h(0),v(e)+3)}else{i.fillText(`0ct`,h(0),v(0)+3);let e=P<20?5:P<50?10:P<100?20:P<200?50:100,t=.5/P;for(let n=e;n<=P;n+=e)i.fillText(`-${n.toFixed()}ct`,h(0),v(-n*t)+3),i.fillText(`+${n.toFixed()}ct`,h(0),v(+n*t)+3)}}var H=document.querySelector(`#dot-info`);function U(){let t=Number.parseInt(w.value)/Number.parseInt(E.value),n=Math.log2(t),r=Number.parseInt(O.value),a=Math.max(1,r),o=A.checked,s=M.checked;R.value=t.toString(),z.value=n.toString(),B.value=r?(n*a).toString():`-`,i.lineWidth=1;for(let t=0;t<a;t++){i.strokeStyle=i.fillStyle=r?`hsl(${t/a}turn 100% 50%)`:`#000`;let c=0,l=0;for(let i=t;i<=e;i+=a){if(i===0)continue;let e=n*i,t=Math.round(e),a=t-e,u=o?Math.abs(a):a,d=s?u:u*600/(i*P);x(i,d,e=>{H.style.display=`block`,H.style.left=Math.min(e.clientX,window.innerWidth-400)+`px`,H.style.top=Math.min(e.clientY,window.innerHeight-100)+`px`,H.value=`${t}/${i} = ${(t/i).toFixed(5)} = logâ‚‚(${w.value}/${E.value}) ${a<0?`-`:`+`} ${(Math.abs(a)/i).toFixed(5)}
where
${(a/i).toFixed(5)} octaves = ${(a/i*1200).toFixed(2)} ct = ${a.toFixed(5)} steps`},()=>{H.style.display=`none`}),r&&(c>0&&y(c,l,i,d),[c,l]=[i,d])}}}for(let e of[w,E,O,A,M,I])e.addEventListener(`input`,()=>{i.clearRect(0,0,a,o),V(),b.length=0,U()});V(),b.length=0,U();